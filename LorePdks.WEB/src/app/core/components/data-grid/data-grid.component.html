<div class="data-grid-container">
  <div class="data-grid-header" *ngIf="headerTitle">
    <h2>{{ headerTitle }}</h2>
  </div>
  
  <p-table 
    [value]="data" 
    [columns]="columns"
    [responsive]="responsive"
    [paginator]="paginator"
    [rows]="rows"
    [rowsPerPageOptions]="rowsPerPageOptions"
    [loading]="loading"
    selectionMode="single"
    [(selection)]="selectedRow"
    (onRowSelect)="onRowSelect($event)"
    (onRowUnselect)="onRowUnselect($event)"
    styleClass="p-datatable-sm"
    [tableStyle]="tableStyle || {'min-width': '50rem'}">
    
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th style="width: 150px;">İşlemler</th>
        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
          {{col.header}}
          <p-sortIcon [field]="col.field"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr [pSelectableRow]="rowData">
        <td>
          <div class="action-buttons">
            <button 
              pButton 
              pRipple 
              icon="pi pi-pencil" 
              class="p-button-rounded p-button-text p-button-sm" 
              pTooltip="Düzenle" 
              tooltipPosition="top"
              (click)="onAction('edit', rowData)">
            </button>
            <button 
              pButton 
              pRipple 
              icon="pi pi-trash" 
              class="p-button-rounded p-button-text p-button-danger p-button-sm" 
              pTooltip="Sil" 
              tooltipPosition="top"
              (click)="onAction('delete', rowData)">
            </button>
            <!-- Özel butonlar için ng-container kullanımını düzeltiyoruz -->
            <ng-container *ngIf="customActionsTemplate">
              <ng-container *ngTemplateOutlet="customActionsTemplate; context: {$implicit: rowData}"></ng-container>
            </ng-container>
          </div>
        </td>
        <td *ngFor="let col of columns">
          <ng-container *ngIf="!col.template">
            {{ col.format ? col.format(rowData[col.field], rowData) : rowData[col.field] }}
          </ng-container>
          <ng-container *ngIf="col.template">
            <ng-container *ngTemplateOutlet="col.template; context: {$implicit: rowData, field: col.field}"></ng-container>
          </ng-container>
        </td>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="emptymessage">
      <tr>
        <td [attr.colspan]="columns.length + 1" class="text-center">
          Kayıt bulunamadı
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>