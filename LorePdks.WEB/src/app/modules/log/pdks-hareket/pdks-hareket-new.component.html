<div class="log-content">
  <!-- Başlık ve Filtreler -->
  <div class="page-header">
    <h2>PDKS Hareketleri</h2>
    <p class="text-muted">Personel geçiş kontrol sistemi hareket kayıtları</p>
  </div>

  <!-- Filtre Paneli -->
  <p-panel header="Filtreler" [toggleable]="true" styleClass="mb-3">
    <div class="filter-row">
      <div class="filter-item">
        <label>Firma:</label>
        <p-dropdown 
          [options]="firmaList" 
          [(ngModel)]="selectedFirma"
          optionLabel="firmaAdi"
          placeholder="Firma seçin"
          [showClear]="true"
          styleClass="w-full">
        </p-dropdown>
      </div>
      
      <div class="filter-item">
        <label>Başlangıç Tarihi:</label>
        <p-calendar 
          [(ngModel)]="baslangicTarihi"
          placeholder="Başlangıç tarihi"
          dateFormat="dd.mm.yy"
          [showIcon]="true"
          styleClass="w-full">
        </p-calendar>
      </div>
      
      <div class="filter-item">
        <label>Bitiş Tarihi:</label>
        <p-calendar 
          [(ngModel)]="bitisTarihi"
          placeholder="Bitiş tarihi"
          dateFormat="dd.mm.yy"
          [showIcon]="true"
          styleClass="w-full">
        </p-calendar>
      </div>
      
      <div class="filter-buttons">
        <button 
          pButton 
          type="button" 
          label="Filtrele" 
          icon="pi pi-search"
          (click)="applyFilters()"
          class="p-button-primary">
        </button>
        <button 
          pButton 
          type="button" 
          label="Temizle" 
          icon="pi pi-times"
          (click)="clearFilters()"
          class="p-button-secondary ml-2">
        </button>
      </div>
    </div>
  </p-panel>

  <!-- Aksiyon Butonları -->
  <div class="action-buttons mb-3">
    <button 
      pButton 
      type="button" 
      label="Yenile" 
      icon="pi pi-refresh"
      (click)="loadPdksHareketList()"
      class="p-button-info">
    </button>
  </div>

  <!-- Veri Tablosu -->
  <p-table 
    [value]="pdksHareketList" 
    [loading]="isLoading"
    [paginator]="true" 
    [rows]="20"
    [responsive]="true"
    styleClass="p-datatable-striped">
    <ng-template pTemplate="header">
      <tr>
        <th>Firma</th>
        <th>Kişi</th>
        <th>Cihaz No</th>
        <th>Kart No</th>
        <th>Hareket Tarihi</th>
        <th>Hareket Tipi</th>
        <th>Kapı No</th>
        <th>IP</th>
        <th>İşlendi</th>
        <th>İşlemler</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.firmaAdi }}</td>
        <td>{{ item.kisiAdi }}</td>
        <td>{{ item.cihazNumarasi }}</td>
        <td>{{ item.kartNumarasi }}</td>
        <td>{{ item.hareketTarihi | date:'dd.MM.yyyy HH:mm' }}</td>
        <td>{{ item.hareketTipiAdi }}</td>
        <td>{{ item.kapiNumarasi }}</td>
        <td>{{ item.ip }}</td>
        <td>
          <i class="pi" [ngClass]="item.isProcessed ? 'pi-check text-green-500' : 'pi-times text-red-500'"></i>
        </td>
        <td>
          <button 
            pButton 
            type="button" 
            icon="pi pi-pencil" 
            class="p-button-sm p-button-text"
            (click)="editPdksHareket(item)"
            pTooltip="Düzenle">
          </button>
          <button 
            pButton 
            type="button" 
            icon="pi pi-trash" 
            class="p-button-sm p-button-text p-button-danger"
            (click)="deletePdksHareket(item)"
            pTooltip="Sil">
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
